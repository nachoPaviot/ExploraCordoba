{% extends "base.html" %}
{% block title %}Registrar Servicio{% endblock %}
{% block content %}
<div class="container form-page">
    <div class="header-section">
        <h1 class="page-title">Registrar Nuevo Servicio</h1>
    </div>

    <div class="form-card">
        <form method="POST">
            
            <div class="form-group">
                <label for="nombre">Nombre del Servicio <span class="required">*</span></label>
                <input type="text" name="nombre" id="nombre" required 
                        class="form-control" maxlength="100">
            </div>

            <div class="form-group">
                <label for="unidad">Unidad de Medida <span class="required">*</span></label>
                <select id="unidad" name="unidad" required class="form-control select-control">
                    <option value="" disabled selected>Selecciona una unidad</option>
                    {% for unidad_opt in unidades %}
                        <option value="{{ unidad_opt }}">{{ unidad_opt }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="precio_base">Precio Base<span class="required">*</span></label>
                <div class="input-group">
                    <input type="number" step="0.01" name="precio_base" id="precio_base" required min="0.01" 
                            class="form-control currency-input" placeholder="0.00">
                </div>
            </div>
            
            <div class="form-group">
                <label for="destino_id">Asociar a Destino <span class="required">*</span></label>
                <select name="destino_id" id="destino_id" required 
                        class="form-control select-control">
                    {% if destinos %}
                        {% for destino in destinos %}
                            <option value="{{ destino.destino_id }}">{{ destino.nombre }} (ID: {{ destino.destino_id }})</option>
                        {% endfor %}
                    {% else %}
                        <option value="" disabled>-- No hay destinos registrados --</option>
                    {% endif %}
                </select>
                {% if not destinos %}
                    <p class="warning-text">¡Advertencia! El administrador de crear un destino para asociar un servicio.</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="descripcion">Descripción <span class="required">*</span></label>
                <textarea name="descripcion" id="descripcion" rows="4" 
                        class="form-control textarea-control" maxlength="255" required></textarea>
            </div>

            <div class="d-flex justify-content-between mt-2">
                <button type="submit" class="btn btn-primary btn-custom">Registar Servicio</button>
            </div>
        </form>
    </div>

    <div class="mt-5">
        <a href="{{ url_for('main.proveedor_panel') }}" class="btn btn-secondary">
        ← Volver al Panel
        </a>
    </div>
</div>
{% endblock %}

{% extends "base.html" %}
{% block title %}Editar Servicio: {{ servicio.nombre }}{% endblock %}

{% block content %}
<div class="container form-page">
    <div class="header-section">
        <h1 class="page-title">Editar Servicio: {{ servicio.nombre }}</h1>
        <p class="text-secondary">Última actualización: {{ servicio.fecha_creacion.strftime('%d/%m/%Y a las %H:%M') }}</p>
    </div>

    <div class="form-card"></div>
        <form method="POST" action="{{ url_for('main.editar_servicio', servicio_id=servicio.servicio_id) }}" class="mt-4">
            
            <div class="form-group">
                <label for="nombre" class="form-label">Nombre del Servicio:</label>
                <input type="text" class="form-control" id="nombre" name="nombre" 
                    maxlength="100" value="{{ servicio.nombre }}" required>
            </div>

            
            <div class="form-group">
                <label for="precio_base" class="form-label">Precio Base:</label>
                <div class="input-group">
                    <input type="number" step="0.01" class="form-control currency-input" 
                           placeholder="0.00" id="precio_base" name="precio_base" required min="0.01"
                           value="{{ '{:g}'.format(servicio.precio_base) | float }}" required>
                </div>
            </div>
                
            <div class="form-group">
                <label for="unidad">Unidad de Medida </label>
                <select id="unidad" name="unidad" required class="form-control select-control">
                    {% for unidad_opt in unidades %}
                        <option value="{{ unidad_opt }}" 
                            {% if unidad_opt == servicio.unidad %}selected{% endif %}>
                            {{ unidad_opt }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="status">Status:</label>
                <select required class="form-control select-control" id="status" name="status" required>
                    {% set available_statuses = ['Disponible', 'Pausado', 'Agotado'] %}
                    {% for status_option in available_statuses %}
                        <option value="{{ status_option }}" 
                                {% if servicio.status == status_option %}selected{% endif %}>
                            {{ status_option }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            

            <div class="form-group">
                <label for="destino_id" class="form-label">Destino asociado:</label>
                <select class="form-control select-control" id="destino_id" name="destino_id" required>
                    <option value="" disabled>Seleccione un destino</option>
                    {% for destino in destinos %}
                        <option value="{{ destino.destino_id }}" 
                                {% if servicio.destino_id == destino.destino_id %}selected{% endif %}>
                            {{ destino.nombre }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="descripcion">Descripción:</label>
                <textarea class="form-control textarea-control" maxlength="255"
                          id="descripcion" name="descripcion" rows="4" required>{{ servicio.descripcion }}</textarea>
            </div>

            <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-primary btn-custom">Guardar Cambios</button>
            </div>
        </form>
    </div>

     <div class="mt-5">
        <a href="{{ url_for('main.proveedor_panel') }}" class="btn btn-secondary">
        ← Volver al Panel
        </a>
    </div>
</div>
{% endblock %}
